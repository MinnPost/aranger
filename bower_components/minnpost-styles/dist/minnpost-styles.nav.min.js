/*! minnpost-styles - v0.0.3 - 2014-08-11
* https://github.com/MinnPost/minnpost-styles
* Copyright (c) 2014 ; Licensed MIT */

!function(a,b){if("undefined"!=typeof module&&module.exports&&"function"==typeof require)module.exports=b(require("jquery"),require("underscore"));else if("function"==typeof define&&define.amd)define(["jquery","underscore"],b);else{if(!a.jQuery||!a._)throw new Error("Could not find dependencies for MinnPost Styles Navigation.");a.MP=a.MP||{},a.MP.nav=b(a.jQuery,a._)}}("undefined"!=typeof window?window:this,function(a,b){function c(b,c){this.element=b,this.$element=a(b),this._defaults=e.MPStickDefaults,this.options=a.extend({},this._defaults,c),this._name="mpStick",this._scrollEvent="scroll.mp.mpStick",this._on=!1,this.init()}function d(b,c){this.element=b,this.$element=a(b),this._defaults=e.MPScrollSpyDefaults,this.options=a.extend({},this._defaults,c),this._name="mpScollSpy",this._scrollEvent="scroll.mp.mpScollSpy",this.init()}var e={};return e.MPStickDefaults={activeClass:"stuck top",wrapperClass:"minnpost-full-container",topPadding:0,throttle:90},c.prototype={init:function(){this.$container=void 0===this.options.container?this.$element.parent():a(this.options.container),this.elementHeight=this.$element.outerHeight(!0),this.$spacer=a("<div>").height(this.elementHeight).hide(),this.$element.after(this.$spacer),this.options.wrapperClass&&this.$element.wrapInner('<div class="'+this.options.wrapperClass+'"></div>'),this._throttledListen=b.bind(b.throttle(this.listen,this.options.throttle),this),this._throttledListen(),a(window).on(this._scrollEvent,this._throttledListen)},listen:function(){var b=this.$container.offset().top,c=b+this.$container.height(),d=a(window).scrollTop(),e=b-this.options.topPadding,f=c-this.elementHeight-this.options.topPadding-2;!this._on&&d>e&&f>d?this.on():this._on&&(e>d||d>f)&&this.off()},on:function(){this.$element.addClass(this.options.activeClass),this.options.topPadding&&this.$element.css("top",this.options.topPadding),this.$spacer.show(),this._on=!0},off:function(){this.$element.removeClass(this.options.activeClass),this.options.topPadding&&this.$element.css("top","inherit"),this.$spacer.hide(),this._on=!1},remove:function(){this.$container.off(this._scrollEvent)}},a.fn.mpStick=function(b){return this.each(function(){a.data(this,"mpStick")||a.data(this,"mpStick",new c(this,b))})},e.MPScrollSpyDefaults={activeClass:"active",offset:80,throttle:200},d.prototype={init:function(){this.$listeners=this.$element.find("[data-spy-on]"),this.$targets=this.$element.find("[data-spy-me]"),this._throttledListen=b.bind(b.throttle(this.listen,this.options.throttle),this),this._throttledListen(),a(window).on(this._scrollEvent,this._throttledListen),this.$listeners.on("click",b.bind(this.gotoClick,this))},listen:function(){var b,c=this,d=a(window).scrollTop();this.$targets.each(function(){var e=a(this);e.offset().top<=d+(c.options.offset+5)&&(b=e.data("spyMe"))}),b&&(this.$listeners.removeClass(this.options.activeClass),this.$element.find('[data-spy-on="'+b+'"]').addClass(this.options.activeClass))},gotoClick:function(b){b.preventDefault();a(b.target);this.goto(a(b.target).data("spyOn"))},"goto":function(b){var c=this.$element.find('[data-spy-me="'+b+'"]'),d=c.offset().top;a("html, body").animate({scrollTop:d-this.options.offset},600)},remove:function(){this.$container.off(this._scrollEvent)}},a.fn.mpScrollSpy=function(b){return this.each(function(){a.data(this,"mpScrollSpy")||a.data(this,"mpScrollSpy",new d(this,b))})},e});